<?php
$translate = $this->plugin('translate');
$escape = $this->plugin('escapeHtml');
$url = $this->plugin('url');
$this->headLink()->prependStylesheet($this->assetUrl('css/user-bar.css', 'Omeka'));
$this->headLink()->prependStylesheet('//fonts.googleapis.com/css?family=Source+Code+Pro|Lato:400,400italic,700,700italic');
if (!isset($user)) $user = $this->identity();
?>
<div id="user-bar">
<?php if ($user): ?>
    <?php if ($this->userIsAllowed('Omeka\Controller\Admin\Index', 'index')): ?>
    <div class="logo"><a href="<?php echo $url('admin'); ?>"><?php echo $this->setting('installation_title', 'Omeka S'); ?></a></div>
    <span class="current-site">
        <a href="<?php echo $site->adminUrl('show'); ?>"><?php echo $site->title(); ?></a>
    </span>
    <?php endif; ?>
    <span class="user-id">
    <?php
    echo sprintf($translate('Signed in as %s'), '<a href="' . $url('admin/id', [
        'controller' => 'user',
        'id' => $user->getId(),
    ]) . '">' . $escape($user->getName()) . '</a>');
    ?>
    </span>
    <span class="logout"><a href="<?php echo $url('logout'); ?>"><?php echo $translate('Logout'); ?></a></span>
<?php else: ?>
    <span class="login"><a href="<?php echo $url('login'); ?>"><?php echo $translate('Log in'); ?></a></span>
<?php endif; ?>
</div>
